<!-- Acknowledgements
Javascript adding data into html table with flask template(jinja2)
https://stackoverflow.com/questions/15164655/generate-html-table-from-2d-javascript-array
https://code.i-harness.com/en/q/aa91ba
http://flask.pocoo.org/docs/1.0/tutorial/templates/
 -->

 <!DOCTYPE html>
 <html>
 <head>
     <title></title>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.21/moment-timezone-utils.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.21/moment-timezone-with-data.js"></script>
     {{ moment.include_jquery() }}
     {{ moment.include_moment() }}
     <style>
         table, th, td {
    border: 1px solid black;
 }
     </style>
 </head>
 <body>
     <table id="dataTable">
         <thead>
             <tr>
                 <th>Timestamp</th>
                 <th>Humidity</th>
                 <th>Temperature</th>
                 <th>Pressure</th>
                 <th>Discomfort</th>    
             </tr>
         </thead>
         <tbody>
             {% for row in rows %}
                 <script>
                     var targetTable = document.getElementById("dataTable");
                     var tableRow = document.createElement('tr');
 
                     var timestamp = document.createElement('td');
                     var hum = document.createElement('td');
                     var temp = document.createElement('td');
                     var press = document.createElement('td');
                     var discomfort = document.createElement('td');
 
                     var a = '{{ row["timestamp"] }}';
                     var b = '{{ row["humidity"] }}';
                     var c = '{{ row["temperature"] }}';
                     var d = '{{ row["pressure"] }}';
                     var e = '{{ row["discomfort"] }}';
                     // console.log(a);
                     var stillUtc = moment.utc(a);
                     var localTime = moment(stillUtc).local().format('LLLL');
                     console.log("localtime: " + localTime);
                     timestamp.appendChild(document.createTextNode(localTime));
                     hum.appendChild(document.createTextNode(b));
                     temp.appendChild(document.createTextNode(c));
                     press.appendChild(document.createTextNode(d));
                     discomfort.appendChild(document.createTextNode(e));
 
                     tableRow.appendChild(timestamp);
                     tableRow.appendChild(hum);
                     tableRow.appendChild(temp);
                     tableRow.appendChild(press);
                     tableRow.appendChild(discomfort);
 
                     targetTable.appendChild(tableRow);
                     
                 </script>
             {% endfor %}
         </tbody>
     </table>
 
 </body>
 </html>
 